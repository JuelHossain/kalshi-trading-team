# AGENTS.md - Kalshi Trading Team Project Guidelines

This file outlines the coding standards, tools, and rules for all agents and developers working on the Kalshi Trading Team project (Sentient Alpha).

## Project Overview
- **Type**: Monorepo with React/Vite (Frontend) and Python 3.12+ (Engine).
- **Architecture**: 2-Tier AI-driven system. Direct communication between UI and Python Engine.
- **Core Agents**: 4 Mega-Agents (Soul, Senses, Brain, Hand).
- **Tools**: ESM, TypeScript, Zustand, Shadcn UI, Python Asyncio, Google GenAI SDK.

## Coding Standards

### General Rules
- **Language Consistency**: TypeScript for Frontend, Python for Engine.
- **Naming**: PascalCase for React components, camelCase for JS functions/variables, snake_case for Python.
- **Error Handling**: No silent failures. High-priority logs must include `agent_id` or `phase_id`.

### Frontend (@/frontend)
- **State**: Use **Zustand** (`src/store/useStore.ts`) for global state.
- **Components**: Shadcn UI + Tailwind. Keep components presentational where possible.
- **API Standard**: All frontend calls must use the relative `/api` proxy.
- **SSE**: Subscribes to `/api/stream` for live agent logs.

- **Persistence**: Inter-agent signals (Opportunities, Executions) must go through `Synapse` persistent queues (SQLite).
- **Communication**: Use `EventBus` for events, but rely on `Synapse` for data handoff to ensure crash-recovery.
- **AI**: Use `google-genai` SDK with Gemini 1.5 Pro.
- **Risk**: Implementation of the "Ragnarok" protocol for emergency liquidation.
- **Context**: Senses agent must fetch news context before Brain debate.

## File Structure
- `frontend/`: React app (Vite, Zustand, Shadcn).
- `engine/`: Python core logic.
  - `agents/`: Mega-Agent implementations.
  - `core/`: Bus, Vault, Network, and Safety utilities.
- `shared/`: Shared TS types (mirrored in Python dicts).
- `walkthroughs/`: Proof-of-work documentation (Read before starting new tasks).
- `legacy/`: Archived components (old backend, early dashboard).

## Agent-Specific Rules
- **UI Agents**: Focus on "Cinematic" visualization of agent logs. Load `ui-design` skill.
- **Engine Agents**: Ensure AI debates are "Critically Objective". Logic must pass Monte Carlo simulation.
- **Exec Agents**: Must respect the **Autopilot Pulse** managed by `SoulAgent`.
- **All Agents**: Always build, deploy, and verify changes. Follow the `CONSTITUTION.md`.

## Quality Gates
- `pytest tests/unit/` must pass for all engine changes.
- `npm run build` must pass for frontend changes.
- Walkthroughs must be recorded for UI changes.

## Commands Reference
- `npm run dev`: Starts the Dev environment (PM2 handles Frontend + Engine).
- `npm run build`: Builds the production bundle.
- `python3 engine/main.py`: Starts the engine independently.

---
_Generated by Sentient Alpha Core_